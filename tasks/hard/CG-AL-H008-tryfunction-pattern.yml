id: CG-AL-H008
prompt_template: code-gen.md
fix_template: bugfix.md
max_attempts: 2
description: >-
  Create a codeunit demonstrating TryFunction pattern for safe execution.

  Create codeunit "CG Safe Executor" (ID 70212) with Access = Public.

  Implement these procedures:

  1. [TryFunction] TryDivide(Numerator: Decimal; Denominator: Decimal; var Result: Decimal)
     - Performs division
     - Returns false (via TryFunction mechanism) if Denominator is 0
     - Sets Result to Numerator / Denominator if successful

  2. SafeDivide(Numerator: Decimal; Denominator: Decimal; DefaultValue: Decimal): Decimal
     - Uses TryDivide internally
     - Returns the division result if successful
     - Returns DefaultValue if TryDivide fails
     - Must NOT raise an error to the caller

  3. [TryFunction] TryParseInteger(InputText: Text; var ParsedValue: Integer)
     - Attempts to evaluate InputText as an Integer
     - Returns false if parsing fails
     - Sets ParsedValue if successful

  4. SafeParseInteger(InputText: Text; DefaultValue: Integer): Integer
     - Uses TryParseInteger internally
     - Returns parsed value or DefaultValue

  5. ExecuteWithFallback(PrimaryValue: Decimal; FallbackValue: Decimal; Divisor: Decimal): Decimal
     - Tries to divide PrimaryValue by Divisor
     - If that fails, tries to divide FallbackValue by Divisor
     - If both fail, returns 0
     - Uses TryDivide for both attempts

  Critical: The [TryFunction] attribute must be on the correct procedures and used correctly.
expected:
  compile: true
  testApp: tests/al/hard/CG-AL-H008.Test.al
metrics:
  - compile_pass
  - tests_pass
  - pass_attempt
