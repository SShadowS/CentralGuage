id: CG-AL-H002
prompt_template: code-gen.md
fix_template: bugfix.md
max_attempts: 2
description: >-
  Create two tables to demonstrate FlowField with CalcFormula:

  1. "CG Warehouse" table (ID 70200) with fields:
     - Code (Code[10], primary key)
     - Name (Text[50])
     - "Total Inventory Qty" (Decimal, FlowField) - sums "Quantity" from all CG Warehouse Entry records for this warehouse
     - "Entry Count" (Integer, FlowField) - counts CG Warehouse Entry records for this warehouse

  2. "CG Warehouse Entry" table (ID 70201) with fields:
     - "Entry No." (Integer, primary key, AutoIncrement)
     - "Warehouse Code" (Code[10], TableRelation to "CG Warehouse".Code)
     - "Item No." (Code[20])
     - Quantity (Decimal)
     - "Posting Date" (Date)

  The CalcFormula for "Total Inventory Qty" must use: Sum("CG Warehouse Entry".Quantity WHERE("Warehouse Code"=FIELD(Code)))
  The CalcFormula for "Entry Count" must use: Count("CG Warehouse Entry" WHERE("Warehouse Code"=FIELD(Code)))

  FlowFields must have Editable = false and FieldClass = FlowField.
expected:
  compile: true
  testApp: tests/al/hard/CG-AL-H002.Test.al
metrics:
  - compile_pass
  - tests_pass
  - pass_attempt
