id: CG-AL-M021
prompt_template: code-gen.md
fix_template: bugfix.md
max_attempts: 2
description: >-
  Create an AL codeunit named "CG YAML Handler" with ID 70121 that handles reading and writing YAML.

  1. Procedure "ParseYamlConfig" that takes Text parameter YamlContent containing YAML like:
     name: MyApp
     version: 1.0.0
     debug: true
     port: 8080
     Parse the YAML into a JsonObject, then extract and return a formatted Text string:
     "App: [name] v[version], Debug: [debug], Port: [port]"

  2. Procedure "CreateYamlFromSettings" that takes Text parameters AppName, Version, Text parameter Env,
     and Boolean parameter EnableLogs. Create a JsonObject with these values and return it as
     a YAML string representation.

  3. Procedure "ConvertJsonToYaml" that takes Text parameter JsonString (valid JSON),
     parses it into JsonObject, then converts to YAML format. Returns the YAML Text.

  4. Procedure "ConvertYamlToJson" that takes Text parameter YamlString,
     parses it as YAML, then converts to JSON format. Returns the JSON Text.

  5. Procedure "MergeYamlConfigs" that takes two Text parameters BaseYaml and OverrideYaml.
     Parse both into JsonObjects, then for each key in OverrideYaml, set it in the base object
     (overwriting if exists). Return the merged result as YAML Text.

  Include Access = Public on the codeunit.
expected:
  compile: true
  testApp: tests/al/medium/CG-AL-M021.Test.al
  testCodeunitId: 80021
metrics:
  - compile_pass
  - tests_pass
  - pass_attempt
