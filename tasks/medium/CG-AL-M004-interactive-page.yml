id: CG-AL-M004
prompt_template: code-gen.md
fix_template: bugfix.md
max_attempts: 2
description: >-
  Create an interactive page called "Sales Order Workspace" with ID 70101 that provides comprehensive order management.
  The page should be PageType Card, based on Sales Header table (filtered to Document Type::Order), and include:

  Layout with multiple FastTabs:
  - General FastTab with fields: "No.", "Sell-to Customer No.", "Sell-to Customer Name", "Order Date", "Posting Date", "Status"
  - Financial FastTab with amount fields (Amount, "Amount Including VAT")
  - Lines subpage part (named exactly "Lines") showing Sales Order Subform

  Custom Actions in the ribbon (use PascalCase names without spaces):
  - CalculateTotals action (Caption = 'Calculate Totals') - trigger CALCFIELDS on amount fields and display a message
  - ApplyDiscount action (Caption = 'Apply Discount') - use Confirm to ask before applying a fixed 10% discount
  - ExportPDF action (Caption = 'Export to PDF') - display a message indicating PDF would be generated
  - SendEmail action (Caption = 'Send Email') - display a message indicating email would be sent

  All actions should:
  - Include ApplicationArea = All and Promoted = true
  - Show user feedback via MESSAGE after execution
  - Actions that modify data should request confirmation

  Dynamic action behavior: Disable CalculateTotals and ApplyDiscount when Status is Released.
expected:
  compile: true
  testApp: tests/al/medium/CG-AL-M004.Test.al
metrics:
  - compile_pass
  - tests_pass
  - pass_attempt
